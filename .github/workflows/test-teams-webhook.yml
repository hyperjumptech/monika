name: Notify Teams

on:
  issues:
    types: [opened]
  pull_request_target:
    types: [opened, reopened]

jobs:
  notify:
    runs-on: ubuntu-latest
    steps:
    - name: Set variables
      id: set_variables
      run: |
        if [ "$GITHUB_EVENT_NAME" = "issues" ]; then
            echo "::set-output name=webhook_title::New issue opened: ${{ github.event.issue.title }}" 
            echo "::set-output name=webhook_text::${{ github.event.issue.html_url }}" 
        else
            echo "::set-output name=webhook_title::New PR opened: ${{ github.event.pull_request.title }}" 
            echo "::set-output name=webhook_text::${{ github.event.pull_request.html_url }}"   
        fi
      env:
        GITHUB_EVENT_NAME: ${{ github.event_name }}
