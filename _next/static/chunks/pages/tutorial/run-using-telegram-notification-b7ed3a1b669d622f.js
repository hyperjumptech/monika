(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[305],{1346:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorial/run-using-telegram-notification",function(){return n(6225)}])},6225:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u},meta:function(){return r}});var a=n(9534),o=(n(7294),n(3905)),i=n(2290),r={id:"run-using-telegram-notification",title:"Run using Telegram Notification"},s={meta:r},l=function(t){var e=t.children,n=(0,a.Z)(t,["children"]);return(0,o.kt)(i.C,Object.assign({meta:r},n),e)};function u(t){var e=t.components,n=(0,a.Z)(t,["components"]);return(0,o.kt)(l,Object.assign({},s,n,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"This tutorial, we will be sharing how to integrate Monika with Telegram bots so that when there are Monika incidents or recoveries, you will be notified on your Telegram group."),(0,o.kt)("h2",Object.assign({},{id:"set-up-the-telegram-bot"}),"Set up the Telegram bot",(0,o.kt)("a",Object.assign({parentName:"h2"},{href:"#set-up-the-telegram-bot",title:"Direct link to heading",className:"anchor"}),(0,o.kt)("span",Object.assign({parentName:"a"},{className:"icon icon-link"})))),(0,o.kt)("p",null,"First, you need a Telegram account. Head over to ",(0,o.kt)("a",Object.assign({parentName:"p"},{href:"https://web.telegram.org"}),"https://web.telegram.org")," to create your account. And then, create a new private chat. Search for an account named \u201c",(0,o.kt)("strong",{parentName:"p"},"BotFather"),"\u201d. After that, do these steps below:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"Type ",(0,o.kt)("strong",{parentName:"li"},"/newbot")," and press Enter to create a new bot."),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("strong",{parentName:"li"},"You will be prompted by BotFather to name your bot"),". Let\u2019s call it anything you like, such as \u201cMonika Bot\u201d, \u201cRise and Shine Bot\u201d, or \u201cOpen your laptop now! Bot\u201d. ",(0,o.kt)("strong",{parentName:"li"},"The more urgent it sounds, the better!")," Type your bot name and press Enter."),(0,o.kt)("li",{parentName:"ul"},"After that, ",(0,o.kt)("strong",{parentName:"li"},"you will be prompted by BotFather to enter your bot username"),". You may see an error because your bot username has been taken by someone else. Type your bot username and press Enter again."),(0,o.kt)("li",{parentName:"ul"},"If you have selected your bot username, you will receive your bot token. ",(0,o.kt)("strong",{parentName:"li"},"Save the token elsewhere")," as we are going to need them later.")),(0,o.kt)("img",Object.assign({},{src:"https://miro.medium.com/max/1400/1*Tj8Yki3M74b_6UEY9fNJcg.png",alt:null})),(0,o.kt)("p",null,"Now the next step is to create a group for the Monika notifications. Create a group in Telegram, and invite your bots into the group. Then, set your bot to be a group administrator."),(0,o.kt)("img",Object.assign({},{src:"https://miro.medium.com/max/1400/1*jI767UEJfnefsev7JDILOQ.png",alt:null})),(0,o.kt)("p",null,"Now that we have our bot API key and set our bot to be a group administrator, all we need to do ",(0,o.kt)("strong",{parentName:"p"},"is get")," the group ID. Invite one of the following bots into your group to obtain the group ID:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",Object.assign({parentName:"li"},{href:"https://t.me/getmyid_bot"}),"getmyid_bot")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",Object.assign({parentName:"li"},{href:"https://t.me/getidsbot"}),"getidsbot")),(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",Object.assign({parentName:"li"},{href:"https://t.me/RawDataBot"}),"RawDataBot"))),(0,o.kt)("p",null,"If those bots are not active anymore, you need to find another bot that can obtain the group ID."),(0,o.kt)("img",Object.assign({},{src:"https://miro.medium.com/v2/resize:fit:640/format:webp/1*NPvMgq5s3BohoW35xDM8kA.png",alt:null})),(0,o.kt)("br",null),(0,o.kt)("p",null,"After successfully inviting the Telegram Bot Raw, you'll see the group ID. ",(0,o.kt)("strong",{parentName:"p"},"Save this ID somewhere safe")," and ",(0,o.kt)("strong",{parentName:"p"},"remove the bot from your group"),". Now that we have the group ID and bot token, we can proceed to integrate it with Monika."),(0,o.kt)("img",Object.assign({},{src:"https://miro.medium.com/max/818/1*kboCi3VtfmWXMBDumzoWdg.png",alt:null})),(0,o.kt)("h2",Object.assign({},{id:"integrate-telegram-with-monika"}),"Integrate Telegram with Monika",(0,o.kt)("a",Object.assign({parentName:"h2"},{href:"#integrate-telegram-with-monika",title:"Direct link to heading",className:"anchor"}),(0,o.kt)("span",Object.assign({parentName:"a"},{className:"icon icon-link"})))),(0,o.kt)("p",null,"Now that we have our Webhook URL, it\u2019s time to create a configuration called ",(0,o.kt)("inlineCode",{parentName:"p"},"monika.yml"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",Object.assign({parentName:"pre"},{}),"notifications:\n  - id: 12f3e1df-3222-4a79-b931-146f964be711\n    type: telegram\n    data:\n      group_id: \"<group_id>\"\n      bot_token: <bot_token>\nprobes:\n  - id: 48c828bb-b761-41e7-b360-ba0692ded184\n    name: ''\n    requests:\n      - url: https://github.com\n        body: {}\n        timeout: 10000\n    alerts: []\n")),(0,o.kt)("p",null,"Let me explain a little bit about this configuration:"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},"You need to set the notification channel in the ",(0,o.kt)("inlineCode",{parentName:"li"},"notifications")," object. There are 3 properties: ",(0,o.kt)("inlineCode",{parentName:"li"},"id"),", ",(0,o.kt)("inlineCode",{parentName:"li"},"type"),", and ",(0,o.kt)("inlineCode",{parentName:"li"},"data"),". Set the ",(0,o.kt)("inlineCode",{parentName:"li"},"id")," to any string values, as it is just an identifier. Then, set the ",(0,o.kt)("inlineCode",{parentName:"li"},"type")," to ",(0,o.kt)("inlineCode",{parentName:"li"},"telegram")," to set the notification channel to Telegram. After that, put your ",(0,o.kt)("strong",{parentName:"li"},"group ID")," and ",(0,o.kt)("strong",{parentName:"li"},"bot token")," notifier webhook URL in ",(0,o.kt)("inlineCode",{parentName:"li"},"group_id")," and ",(0,o.kt)("inlineCode",{parentName:"li"},"bot_token")," keys in the ",(0,o.kt)("inlineCode",{parentName:"li"},"data")," object."),(0,o.kt)("li",{parentName:"ul"},"Monika will be probing ",(0,o.kt)("a",Object.assign({parentName:"li"},{href:"https://github.com/"}),"https://github.com")," and will send you an alert if the response time is greater than two seconds or the response status code is not 200, meaning the website is down five times.")),(0,o.kt)("p",null,"Now that we have our configuration ready, it\u2019s time to run it with Monika. Go to the directory where you saved the Monika configuration, and run Monika straight away using ",(0,o.kt)("inlineCode",{parentName:"p"},"monika -c monika.yml")),(0,o.kt)("img",Object.assign({},{src:"https://miro.medium.com/v2/resize:fit:640/format:webp/1*ex2EVu4pvX088mDJ9NjwLQ.png",alt:null})),(0,o.kt)("br",null),"Congratulations! Now that you have successfully integrated Monika with Telegram, you will be notified if your website is slow or down.")}u.isMDXComponent=!0}},function(t){t.O(0,[357,513,290,774,888,179],(function(){return e=1346,t(t.s=e);var e}));var e=t.O();_N_E=e}]);