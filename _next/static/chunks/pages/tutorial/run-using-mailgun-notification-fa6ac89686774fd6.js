(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[98],{2411:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/tutorial/run-using-mailgun-notification",function(){return n(520)}])},520:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return u},meta:function(){return s}});var i=n(9534),a=(n(7294),n(3905)),o=n(2290),s={id:"run-using-mailgun-notification",title:"Run using Mailgun Notification"},r={meta:s},l=function(t){var e=t.children,n=(0,i.Z)(t,["children"]);return(0,a.kt)(o.C,Object.assign({meta:s},n),e)};function u(t){var e=t.components,n=(0,i.Z)(t,["components"]);return(0,a.kt)(l,Object.assign({},r,n,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This tutorial will show you how to integrate Monika with Mailgun so you can receive notifications from Monika straight to your email."),(0,a.kt)("h2",Object.assign({},{id:"getting-the-mailgun-api-key"}),"Getting the Mailgun API Key",(0,a.kt)("a",Object.assign({parentName:"h2"},{href:"#getting-the-mailgun-api-key",title:"Direct link to heading",className:"anchor"}),(0,a.kt)("span",Object.assign({parentName:"a"},{className:"icon icon-link"})))),(0,a.kt)("p",null,"To get the Mailgun API Key, you need to create an account first. Head to ",(0,a.kt)("a",Object.assign({parentName:"p"},{href:"https://www.mailgun.com"}),"https://www.mailgun.com")," and proceed to create an account. After that, log in to your dashboard."),(0,a.kt)("img",Object.assign({},{src:"https://miro.medium.com/max/1400/1*KqC_cBnu6afYLCyT0cqpbg.png",alt:null})),(0,a.kt)("p",null,"After that, you need to configure your domain. Let\u2019s assume that you are on the free tier. Click ",(0,a.kt)("strong",{parentName:"p"},"Sending,")," and click ",(0,a.kt)("strong",{parentName:"p"},"Domains"),". Then, click the first listed sandbox domain."),(0,a.kt)("p",null,"You will be redirected to a page that asks you \u201cHow would you like to send your emails from <YOUR_SANDBOX_DOMAIN>?\u201d. On that page, select the API method and you will see your API key. ",(0,a.kt)("strong",{parentName:"p"},"Copy your API key and your sandbox domain and save it somewhere else"),"."),(0,a.kt)("img",Object.assign({},{src:"https://miro.medium.com/max/1400/1*uf-1Ai_HGFfBlhshxpfrOg.png",alt:null})),(0,a.kt)("p",null,"Then, you need to add your email to the Authorized Recipients. On the same page, scroll down to see the Authorized Recipients section. Add your email for testing purposes, and verify your email."),(0,a.kt)("img",Object.assign({},{src:"https://miro.medium.com/max/1400/1*_6VLwNPss3OT1iASWRo-Sg.png",alt:null})),(0,a.kt)("p",null,"Now that the preparation has been done, it\u2019s time to run Monika with Mailgun notification."),(0,a.kt)("h2",Object.assign({},{id:"running-monika-with-mailgun-notification"}),"Running Monika with Mailgun Notification",(0,a.kt)("a",Object.assign({parentName:"h2"},{href:"#running-monika-with-mailgun-notification",title:"Direct link to heading",className:"anchor"}),(0,a.kt)("span",Object.assign({parentName:"a"},{className:"icon icon-link"})))),(0,a.kt)("p",null,"Now that we have the Mailgun API Key, Sandbox Domain, set up the Authorized Recipients, and installed Monika, it\u2019s time to create a configuration called ",(0,a.kt)("inlineCode",{parentName:"p"},"monika.yml"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",Object.assign({parentName:"pre"},{}),"notifications:\n  - id: unique-id-mailgun\n    type: mailgun\n    data:\n      recipients: ['YOUR_AUTHORIZED_RECIPIENTS_EMAIL']\n      apiKey: YOUR_MAILGUN_API_KEY\n      domain: YOUR_SANDBOX_DOMAIN\nprobes:\n  - id: test\n    interval: 10\n    requests:\n      - url: https://reqres.in/api/users\n        method: GET\n    alerts:\n      - query: response.time > 2000\n        message: Response time is longer than two seconds\n")),(0,a.kt)("p",null,"Let me explain a little bit about this configuration:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"You need to set the notification channel in the ",(0,a.kt)("inlineCode",{parentName:"li"},"notifications")," object. There are 3 properties: ",(0,a.kt)("inlineCode",{parentName:"li"},"id"),", ",(0,a.kt)("inlineCode",{parentName:"li"},"type"),", and ",(0,a.kt)("inlineCode",{parentName:"li"},"data"),". Set the ",(0,a.kt)("inlineCode",{parentName:"li"},"id")," to any string values, as it is just an identifier. Then, set the ",(0,a.kt)("inlineCode",{parentName:"li"},"type")," field to ",(0,a.kt)("inlineCode",{parentName:"li"},"mailgun")," to use the Mailgun notification channel. After that, put your Mailgun API Key, recipients, and domain in the corresponding fields."),(0,a.kt)("li",{parentName:"ul"},"Monika will be probing ",(0,a.kt)("a",Object.assign({parentName:"li"},{href:"https://reqres.in/api/users"}),"https://reqres.in/api/users")," using the GET method every ten seconds and will send you an alert if the response time is longer than two seconds.")),(0,a.kt)("p",null,"Save the configuration as monika.yml. To run the Monika configuration, go to the directory where you saved the Monika configuration, and run Monika straight away using ",(0,a.kt)("inlineCode",{parentName:"p"},"monika -c monika.yml")),(0,a.kt)("p",null,(0,a.kt)("img",Object.assign({parentName:"p"},{src:"https://miro.medium.com/max/1400/1*ASIxR-oh22Xsddu_2NI3iA.png",alt:null})),"It\u2019s working!"),(0,a.kt)("p",null,"Congratulations! Now that you have successfully integrated Monika with Mailgun, you will be notified if your website is slow or down through your email!"))}u.isMDXComponent=!0}},function(t){t.O(0,[357,513,290,774,888,179],(function(){return e=2411,t(t.s=e);var e}));var e=t.O();_N_E=e}]);